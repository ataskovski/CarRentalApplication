@using Microsoft.AspNetCore.Identity
@using CarRentalApplication.Domain.Identity
@inject SignInManager<CarRentalApplicationUser> SignInManager
@inject UserManager<CarRentalApplicationUser> UserManager
@model CarRentalApplication.Domain.DomainModels.Car

@{
    ViewData["Title"] = "Car Details";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="row mb-4">
    <div class="col-12">
        <a asp-action="Index" class="btn btn-secondary btn-sm">Back to Cars</a>
    </div>
</div>

<div class="card card-modern">
    <div class="card-body">
        <div class="d-flex justify-content-between">
            <div>
                <h2 class="h4">@Model.Make @Model.Model</h2>
                <p class="text-muted">@Model.Category • @Model.Year</p>
            </div>
            <div class="text-end">
                <div class="card-price mb-2">@Model.PricePerDay.ToString("C") / day</div>
                <div class="badge @(Model.IsAvailable ? "bg-success" : "bg-danger")">@(Model.IsAvailable ? "Available" : "Unavailable")</div>
            </div>
        </div>

        <hr />
        @if (SignInManager.IsSignedIn(User))
        {
            @if (Model.IsAvailable && SignInManager.IsSignedIn(User))
            {
                <div class="mt-3">
                    <a asp-action="AddToWishlist" asp-route-id="@Model?.Id" class="btn btn-sm btn-primary ms-2">Add to Wishlist</a>
                </div>
            }
            else
            {
                <div class="alert alert-warning" role="alert">
                    You cannot rent this car at the moment. You will be able to rent it when it becomes available.
                </div>
            }
        }
        else
        {
            <div class="alert alert-warning" role="alert">
                You need to be logged in to rent this car.
            </div>
        }
       
    </div>
</div>
